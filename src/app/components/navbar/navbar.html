<nav [class.-translate-y-full]="!isNavVisible() && !isMenuOpen()"
    class="fixed top-0 left-0 w-full z-50 transition-all duration-500 glass border-b border-[var(--border-color)]">

    <!-- Scroll Progress Bar -->
    <div class="absolute bottom-0 left-0 h-0.5 bg-[var(--accent)] transition-all duration-200 ease-out"
        [style.width.%]="scrollProgress()"></div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex justify-between items-center">
        <!-- Logo -->
        <a href="/" class="text-xl font-bold font-mono tracking-tighter hover:text-[var(--accent)] transition-colors">
            &lt;DEV/&gt;
        </a>

        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-8 font-medium">
            <a *ngFor="let link of links" [href]="link.path" (click)="navigateToSection($event, link.path)"
                class="relative text-sm uppercase tracking-wide hover:text-[var(--accent)] transition-colors duration-200 group">
                {{ link.name }}
                <span
                    class="absolute -bottom-1 left-0 w-0 h-0.5 bg-[var(--accent)] transition-all duration-300 group-hover:w-full"></span>
            </a>
        </div>

        <!-- Desktop Theme Toggle -->
        <div class="hidden md:flex items-center">
            <button (click)="toggleTheme()" class="p-2 rounded-full hover:bg-[var(--bg-secondary)] transition-colors">
                <svg *ngIf="themeService.currentTheme() === 'dark'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <svg *ngIf="themeService.currentTheme() === 'light'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            </button>
        </div>


        <!-- Mobile Menu Button (Modern Hamburger) -->
        <div class="md:hidden flex items-center z-50 relative gap-3">
            <button (click)="toggleTheme()" class="p-2 rounded-full hover:bg-[var(--bg-secondary)] transition-colors">
                <svg *ngIf="themeService.currentTheme() === 'dark'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <svg *ngIf="themeService.currentTheme() === 'light'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            </button>

            <!-- Premium Hamburger Icon -->
            <button (click)="toggleMenu()"
                class="relative w-10 h-10 flex items-center justify-center focus:outline-none group">
                <div class="w-6 h-5 flex flex-col justify-between">
                    <span
                        class="block w-full h-0.5 bg-[var(--text-primary)] rounded-full transition-all duration-300 ease-out transform origin-center"
                        [ngClass]="{'rotate-45 translate-y-2': isMenuOpen(), 'translate-y-0': !isMenuOpen()}"></span>
                    <span
                        class="block w-full h-0.5 bg-[var(--text-primary)] rounded-full transition-all duration-300 ease-out"
                        [ngClass]="{'opacity-0 scale-0': isMenuOpen(), 'opacity-100 scale-100': !isMenuOpen()}"></span>
                    <span
                        class="block w-full h-0.5 bg-[var(--text-primary)] rounded-full transition-all duration-300 ease-out transform origin-center"
                        [ngClass]="{'-rotate-45 -translate-y-2': isMenuOpen(), 'translate-y-0': !isMenuOpen()}"></span>
                </div>
            </button>
        </div>
    </div>

    <!-- Mobile Menu Overlay (Modern Full Screen) -->
    <div class="fixed inset-0 z-40 mobile-menu-overlay glass flex flex-col justify-center items-center transition-all duration-500 ease-in-out transform"
        [ngClass]="{'translate-y-0 opacity-100': isMenuOpen(), '-translate-y-full opacity-0 pointer-events-none': !isMenuOpen()}">

        <div class="flex flex-col space-y-10 text-center">
            <a *ngFor="let link of links; let i = index" [href]="link.path"
                (click)="navigateToSection($event, link.path)"
                class="text-5xl sm:text-6xl font-bold tracking-tighter hover:text-[var(--accent)] transition-all duration-300 transform translate-y-4 opacity-0 animate-slide-up-stagger relative group"
                [style.animation-delay]="(i * 80) + 'ms'" [class.opacity-100]="isMenuOpen()"
                [class.translate-y-0]="isMenuOpen()">
                <span class="relative">
                    {{ link.name }}
                    <span
                        class="absolute -bottom-2 left-0 w-0 h-1 bg-[var(--accent)] transition-all duration-300 group-hover:w-full"></span>
                </span>
            </a>
        </div>

        <div class="absolute bottom-12 text-xs sm:text-sm text-[var(--text-secondary)] font-mono opacity-60">
            &copy; 2026 Portfolio. All rights reserved.
        </div>
    </div>
</nav>